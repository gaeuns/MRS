<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>공지사항 수정</title>
  <link rel="stylesheet" th:href="@{/board.css}">
  <style>
    .post-image-preview {
      margin-top: 10px;
    }
    .post-image-preview img {
      max-width: 100%;
      height: auto;
      border-radius: 6px;
      margin-top: 5px;
    }
  </style>
</head>
<body class="board-main">

<div class="board-header">
  <h1>공지사항 수정</h1>
  <div class="breadcrumb">
    <a th:href="@{/}">홈</a> &gt; <a th:href="@{/notice}">공지사항</a> &gt; 수정
  </div>
</div>

<div class="board-content">
  <form class="write-form"
        th:action="@{'/notice/edit/' + ${notice.id}}"
        method="post"
        enctype="multipart/form-data"
        th:object="${notice}">

    <!-- 제목 -->
    <div class="form-group">
      <label for="title" class="form-label">제목 <span class="required">*</span></label>
      <input type="text" id="title" name="title" th:field="*{title}" class="form-input" required>
    </div>

    <!-- 내용 -->
    <div class="form-group">
      <label for="content" class="form-label">내용 <span class="required">*</span></label>
      <textarea id="content" name="content" th:field="*{content}" class="form-textarea" required></textarea>
    </div>

    <!-- 중요도 -->
    <div class="form-group">
      <label class="form-label">중요도</label>
      <div class="radio-group">
        <label class="radio-item">
          <input type="radio" name="importance" value="NORMAL" th:checked="${notice.importance == 'NORMAL'}">
          <span>일반</span>
        </label>
        <label class="radio-item">
          <input type="radio" name="importance" value="IMPORTANT" th:checked="${notice.importance == 'IMPORTANT'}">
          <span>중요</span>
        </label>
      </div>
    </div>

    <!-- 이미지 첨부 -->
    <div class="form-group">
      <label class="form-label">첨부 이미지</label>
      <input type="file" name="imageFile" class="form-input" accept="image/*">
      <!-- 현재 첨부된 이미지가 있을 경우 미리보기 -->
      <div class="post-image-preview" th:if="${notice.imagePath != null}">
        <p>현재 이미지:</p>
        <img th:src="@{${notice.imagePath}}" alt="현재 이미지">
      </div>
    </div>

    <!-- 버튼 -->
    <div class="form-actions">
      <button type="submit" class="btn btn-primary">수정 완료</button>
      <a th:href="@{/notice}" class="btn btn-secondary">취소</a>
    </div>

  </form>
</div>

</body>
</html>
