<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>공지사항 상세</title>
  <link rel="stylesheet" th:href="@{/main.css}">
  <link rel="stylesheet" th:href="@{/board.css}">
  <style>
    .post-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 10px;
    }

    .meta-left {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .meta-right {
      display: flex;
      gap: 10px;
    }

    .meta-right form {
      display: inline;
    }
  </style>
</head>
<body>
<header class="site-header">
  <div class="container">
    <div class="logo">
      <h1><a th:href="@{/}">무비리뷰</a></h1>
    </div>
    <nav class="main-nav">
      <ul>
        <li><a th:href="@{/}">홈</a></li>
        <li><a th:href="@{/movies}">영화</a></li>
        <li><a th:href="@{/community}">커뮤니티</a></li>
        <li><a th:href="@{/notice}">공지사항</a></li>
      </ul>
    </nav>
  </div>
</header>

<main class="board-main">
  <div class="container">
    <div class="board-content post-detail">
      <div class="post-header">
        <div class="post-category">
          <span th:classappend="${notice.importance == 'IMPORTANT'} ? 'notice-badge' : 'notice-badge normal'"
                th:text="${notice.importance == 'IMPORTANT'} ? '중요' : '공지'">공지</span>
        </div>
        <h1 class="post-title" th:text="${notice.title}">공지 제목</h1>

        <!-- 작성자/작성일/조회수 + 버튼들 -->
        <div class="post-meta">
          <div class="meta-left">
            <span class="author-name" th:text="${notice.author}">관리자</span>
            <span class="post-date" th:text="${#temporals.format(notice.createdAt, 'yyyy.MM.dd HH:mm')}">작성일</span>
            <span class="post-views" th:text="'조회수 ' + ${notice.viewCount}">조회수 0</span>
          </div>
          <div class="meta-right">
            <a th:href="@{/notice}" class="btn btn-secondary">목록</a>

            <div th:if="${sessionUser != null and sessionUser.userRole.name() == 'ADMIN'}">
              <a th:href="@{'/notice/edit/' + ${notice.id}}" class="btn btn-primary">수정</a>
              <form th:action="@{'/notice/delete/' + ${notice.id}}" method="post"
                    onsubmit="return confirm('정말 삭제하시겠습니까?');">
                <button type="submit" class="btn btn-outline">삭제</button>
              </form>
            </div>
          </div>
        </div>
      </div>

      <div class="post-content">
        <div class="content-body" th:text="${notice.content}">
          공지 내용입니다.
        </div>
      </div>
    </div>
  </div>
</main>

<footer class="site-footer">
  <div class="container">
    <p>&copy; 2025 무비리뷰. All rights reserved.</p>
  </div>
</footer>
</body>
</html>
